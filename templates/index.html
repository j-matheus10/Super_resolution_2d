<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Super-Resolución UAH</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .help-text { font-size: 0.85em; color: #6c757d; margin-top: 2px; }
    </style>
</head>
<body class="bg-light p-4">
    <div class="container bg-white p-5 rounded shadow" style="max-width: 800px;">
        <h2 class="text-center mb-4 text-primary">Super-Resolución de Imágenes</h2>
        <p class="text-center mb-4">Proyecto de Métodos Numéricos - Universidad Alberto Hurtado</p>
        
        <form action="/superresolution" method="post" enctype="multipart/form-data">
            
            <div class="mb-4 p-3 border rounded bg-light">
                <label class="form-label fw-bold">1. Imagen de Entrada (LR)</label>
                <input type="file" name="image" class="form-control" required accept="image/*">
                <div class="help-text">Sube una imagen pequeña o de baja calidad para reconstruirla.</div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label fw-bold">Tipo de Regularización</label>
                    <select name="reg_type" class="form-select">
                        <option value="L2" {% if p.reg_type == 'L2' %}selected{% endif %}>Norma L2 (Tikhonov)</option>
                        <option value="Huber" {% if p.reg_type == 'Huber' %}selected{% endif %}>Huber TV (Preserva bordes)</option>
                    </select>
                    <div class="help-text">
                        <strong>L2:</strong> Suaviza toda la imagen.<br>
                        <strong>Huber:</strong> Intenta mantener los bordes nítidos.
                    </div>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">Factor de Escala (s)</label>
                    <input type="number" name="s_factor" class="form-control" value="{{ p.s_factor }}" min="1" max="5">
                    <div class="help-text">
                        Cuántas veces agrandar la imagen.<br>
                        <strong>↑ Subir:</strong> Imagen más grande, difícil de reconstruir.
                    </div>
                </div>
            </div>

            <hr>

            <h5 class="mb-3">Ajuste Fino del Algoritmo</h5>
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label fw-bold">Lambda (λ) - Peso Regularización</label>
                    <input type="number" step="0.001" name="lambd" class="form-control" value="{{ p.lambd }}">
                    <div class="help-text">
                        Equilibrio entre fidelidad y suavidad.<br>
                        <strong>↑ Subir:</strong> Imagen más borrosa/suave.<br>
                        <strong>↓ Bajar:</strong> Imagen más fiel al original (ruido).
                    </div>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">Delta (δ) - Solo para Huber</label>
                    <input type="number" step="0.001" name="delta" class="form-control" value="{{ p.delta }}">
                    <div class="help-text">
                        Umbral para detectar bordes.<br>
                        <strong>↑ Subir:</strong> Se comporta como L2.<br>
                        <strong>↓ Bajar:</strong> Detecta bordes más finos.
                    </div>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-md-6">
                    <label class="form-label fw-bold">Iteraciones (k)</label>
                    <input type="number" name="max_iter" class="form-control" value="{{ p.max_iter }}" min="1">
                    <div class="help-text">
                        Cuántas veces corregir la imagen.<br>
                        <strong>↑ Subir:</strong> Mejor calidad (lento).<br>
                        <strong>↓ Bajar:</strong> Rápido.
                    </div>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">Paso de Descenso (τ)</label>
                    <input type="number" step="0.01" name="tau" class="form-control" value="{{ p.tau }}">
                    <div class="help-text">
                        Velocidad de aprendizaje.<br>
                        <strong>↑ Subir:</strong> Converge rápido (riesgo inestabilidad).<br>
                        <strong>↓ Bajar:</strong> Converge lento (seguro).
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-100 py-2 fw-bold">Ejecutar Reconstrucción (POST)</button>
        </form>
    </div>
</body>
</html>